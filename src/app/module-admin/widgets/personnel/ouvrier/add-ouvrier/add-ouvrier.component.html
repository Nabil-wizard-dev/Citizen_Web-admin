<div class="col-md-8 col-12">
    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Nouvel Ouvrier</h4>
        </div>
        <div class="card-content">
            <div class="card-body">
                <form [formGroup]="ouvrierForm" (ngSubmit)="onSubmit()" class="form form-vertical">
                    
                    <!-- Messages de feedback -->
                    <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show" role="alert">
                        <i class="bi bi-check-circle me-2"></i>{{ successMessage }}
                    </div>
                    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
                        <i class="bi bi-exclamation-triangle me-2"></i>{{ errorMessage }}
                    </div>

                    <div class="form-body">
                        <div class="row">
                            <!-- Nom et Prénom -->
                            <div class="col-md-6 col-12">
                                <div class="form-group has-icon-left">
                                    <label for="nom">Nom *</label>
                                    <div class="position-relative">
                                        <input 
                                            type="text" 
                                            class="form-control" 
                                            placeholder="Nom"
                                            id="nom"
                                            formControlName="nom"
                                            [class.is-invalid]="form['nom'].invalid && form['nom'].touched">
                                        <div class="form-control-icon">
                                            <i class="bi bi-person"></i>
                                        </div>
                                    </div>
                                    <div *ngIf="form['nom'].invalid && form['nom'].touched" class="invalid-feedback d-block">
                                        <small *ngIf="form['nom'].errors?.['required']">Le nom est requis.</small>
                                        <small *ngIf="form['nom'].errors?.['minlength']">Le nom doit avoir au moins 3 caractères.</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 col-12">
                                <div class="form-group has-icon-left">
                                    <label for="prenom">Prénom *</label>
                                    <div class="position-relative">
                                        <input 
                                            type="text" 
                                            class="form-control" 
                                            placeholder="Prénom"
                                            id="prenom"
                                            formControlName="prenom"
                                            [class.is-invalid]="form['prenom'].invalid && form['prenom'].touched">
                                        <div class="form-control-icon">
                                            <i class="bi bi-person"></i>
                                        </div>
                                    </div>
                                    <div *ngIf="form['prenom'].invalid && form['prenom'].touched" class="invalid-feedback d-block">
                                        <small *ngIf="form['prenom'].errors?.['required']">Le prénom est requis.</small>
                                        <small *ngIf="form['prenom'].errors?.['minlength']">Le prénom doit avoir au moins 3 caractères.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- CNI -->
                            <div class="col-12">
                                <div class="form-group has-icon-left">
                                    <label for="cni">CNI *</label>
                                    <div class="position-relative">
                                        <input 
                                            type="text" 
                                            class="form-control" 
                                            placeholder="1234-567-8910" 
                                            id="cni"
                                            formControlName="cni"
                                            [class.is-invalid]="form['cni'].invalid && form['cni'].touched">
                                        <div class="form-control-icon">
                                            <i class="bi bi-file-earmark-person"></i>
                                        </div>
                                    </div>
                                    <div *ngIf="form['cni'].invalid && form['cni'].touched" class="invalid-feedback d-block">
                                        <small *ngIf="form['cni'].errors?.['required']">Le CNI est requis.</small>
                                        <small *ngIf="form['cni'].errors?.['pattern']">Format invalide. Exemple attendu : 1234-567-8910.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Email -->
                            <div class="col-12">
                                <div class="form-group has-icon-left">
                                    <label for="email">Email *</label>
                                    <div class="position-relative">
                                        <input 
                                            type="email" 
                                            class="form-control" 
                                            placeholder="email@exemple.com" 
                                            id="email"
                                            formControlName="email"
                                            [class.is-invalid]="form['email'].invalid && form['email'].touched">
                                        <div class="form-control-icon">
                                            <i class="bi bi-envelope"></i>
                                        </div>
                                    </div>
                                    <div *ngIf="form['email'].invalid && form['email'].touched" class="invalid-feedback d-block">
                                        <small *ngIf="form['email'].errors?.['required']">L'email est requis.</small>
                                        <small *ngIf="form['email'].errors?.['pattern']">Format d'email invalide.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Numéro de téléphone -->
                            <div class="col-12">
                                <div class="form-group has-icon-left">
                                    <label for="numero">Numéro de téléphone *</label>
                                    <div class="position-relative">
                                        <input 
                                            type="tel" 
                                            class="form-control" 
                                            placeholder="12345678"
                                            id="numero"
                                            formControlName="numero"
                                            [class.is-invalid]="form['numero'].invalid && form['numero'].touched">
                                        <div class="form-control-icon">
                                            <i class="bi bi-phone"></i>
                                        </div>
                                    </div>
                                    <div *ngIf="form['numero'].invalid && form['numero'].touched" class="invalid-feedback d-block">
                                        <small *ngIf="form['numero'].errors?.['required']">Le numéro est requis.</small>
                                        <small *ngIf="form['numero'].errors?.['minlength'] || form['numero'].errors?.['maxlength']">Le numéro doit avoir exactement 8 chiffres.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Spécialité -->
                            <div class="col-12">
                                <div class="form-group has-icon-left">
                                    <label for="specialite">Spécialité *</label>
                                    <div class="position-relative">
                                        <input 
                                            type="text" 
                                            class="form-control" 
                                            placeholder="Ex: Plomberie, Électricité, Maçonnerie..."
                                            id="specialite"
                                            formControlName="specialite"
                                            [class.is-invalid]="form['specialite'].invalid && form['specialite'].touched">
                                        <div class="form-control-icon">
                                            <i class="bi bi-tools"></i>
                                        </div>
                                    </div>
                                    <div *ngIf="form['specialite'].invalid && form['specialite'].touched" class="invalid-feedback d-block">
                                        <small *ngIf="form['specialite'].errors?.['required']">La spécialité est requise.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Mot de passe -->
                            <div class="col-12">
                                <div class="form-group has-icon-left">
                                    <label for="motDePasse">Mot de passe *</label>
                                    <div class="position-relative">
                                        <input 
                                            type="password" 
                                            class="form-control" 
                                            placeholder="Mot de passe"
                                            id="motDePasse"
                                            formControlName="motDePasse"
                                            [class.is-invalid]="form['motDePasse'].invalid && form['motDePasse'].touched">
                                        <div class="form-control-icon">
                                            <i class="bi bi-lock"></i>
                                        </div>
                                    </div>
                                    <div *ngIf="form['motDePasse'].invalid && form['motDePasse'].touched" class="invalid-feedback d-block">
                                        <small *ngIf="form['motDePasse'].errors?.['required']">Le mot de passe est requis.</small>
                                        <small *ngIf="form['motDePasse'].errors?.['pattern']">Le mot de passe doit contenir au moins 8 caractères avec majuscules, minuscules, chiffres et caractères spéciaux.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Adresse -->
                            <div class="col-12">
                                <div class="form-group has-icon-left">
                                    <label for="adresse">Adresse</label>
                                    <div class="position-relative">
                                        <input 
                                            type="text" 
                                            class="form-control" 
                                            placeholder="Adresse complète"
                                            id="adresse"
                                            formControlName="adresse">
                                        <div class="form-control-icon">
                                            <i class="bi bi-geo-alt"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Date de naissance -->
                            <div class="col-12">
                                <div class="form-group has-icon-left">
                                    <label for="dateNaissance">Date de naissance</label>
                                    <div class="position-relative">
                                        <input 
                                            type="date" 
                                            class="form-control" 
                                            id="dateNaissance"
                                            formControlName="dateNaissance">
                                        <div class="form-control-icon">
                                            <i class="bi bi-calendar"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Boutons d'action -->
                            <div class="col-12 d-flex justify-content-end gap-2">
                                <button 
                                    type="button" 
                                    class="btn btn-light-secondary me-1 mb-1" 
                                    (click)="onReset()"
                                    [disabled]="loading">
                                    <i class="bi bi-arrow-clockwise me-1"></i>Annuler
                                </button>
                                <button 
                                    type="submit" 
                                    class="btn btn-primary me-1 mb-1"
                                    [disabled]="ouvrierForm.invalid || loading">
                                    <span *ngIf="loading" class="spinner-border spinner-border-sm me-1" role="status"></span>
                                    <i *ngIf="!loading" class="bi bi-check-circle me-1"></i>
                                    {{ loading ? 'Création...' : 'Créer l\'ouvrier' }}
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>